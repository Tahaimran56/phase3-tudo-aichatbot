---
id: 002
title: Phase 2 Constitution Update Web Architecture
stage: constitution
date: 2025-12-21
surface: agent
model: claude-sonnet-4-5-20250929
feature: none
branch: 001-todo-console-app
user: Dell
command: /sp.constitution
labels: ["constitution", "governance", "phase2", "web", "authentication", "database"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
  - .specify/memory/constitution.md
tests:
  - null
---

## Prompt

Project Constitution: The Evolution of Todo (Phase 2)
1. Web Development Principles
Multi-User Isolation: Data must be strictly isolated by user ID. No user should ever access another's tasks.

Responsive Design: The UI must be "Mobile-First," ensuring usability on all screen sizes using Tailwind CSS.

RESTful Integrity: All backend communication must follow standard HTTP methods (GET, POST, PUT, DELETE).

2. Technical Standards
Database Safety: All interactions with Neon Postgres must use an ORM or safe query builders to prevent SQL injection.

Authentication: User sessions must be managed exclusively through Better Auth.

API Documentation: Every endpoint must be typed and self-documenting (e.g., FastAPI's Swagger).

3. SDD Workflow Rules
Zero Manual Coding: All web components and API routes must be generated by the AI agent based on specifications.

Atomic Commits: Commit code only after a single task from tasks.md is completed and verified.

## Response snapshot

Updated constitution from v1.0.0 to v2.0.0 (MAJOR version bump for Phase 2 web architecture):

**New Web Development Principles:**
- VII. Multi-User Isolation - user data segregation
- VIII. Responsive Design - Mobile-First + Tailwind CSS
- IX. RESTful Integrity - HTTP methods and conventions

**New Technical Standards:**
- Database Safety - Neon Postgres + ORM requirement
- Authentication - Better Auth exclusive
- API Documentation - FastAPI Swagger + Pydantic

**Enhanced Principles:**
- II. SDD Strictness - added Zero Manual Coding + Atomic Commits
- III. Language Standard - expanded for frontend (TypeScript/ESLint)
- VI. Documentation - added API self-documenting requirement

**Retained Phase 1 compatibility** - CLI principles preserved.

## Outcome

- ‚úÖ Impact: High - foundational governance for Phase 2 web migration
- üß™ Tests: N/A - governance document
- üìÅ Files: 1 file updated (.specify/memory/constitution.md)
- üîÅ Next prompts: /sp.specify for Phase 2 web app spec
- üß† Reflection: MAJOR bump appropriate due to architecture shift from CLI to web

## Evaluation notes (flywheel)

- Failure modes observed: None
- Graders run and results (PASS/FAIL): N/A - manual governance review
- Prompt variant (if applicable): N/A
- Next experiment (smallest change to try): N/A
